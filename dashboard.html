<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco-League Family Dashboard</title>
    <style>
        /* Color Variables */
        :root {
            --dark-green: #004d40; /* Primary Dark */
            --mid-green: #4caf50; /* Primary Medium */
            --light-green: #e8f5e9; /* Background Light */
            --accent-green: #ecfbe1; /* Highlight Banner */
            --white: #ffffff;
            --gray-light: #f5f5f5;
            --activity-green: #eaf8ed;
            --point-green: #1a7e4b;
            --box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08); /* Stronger shadow */
            --border-radius: 12px;
        }

        /* Base Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Modern, clear font */
            margin: 0;
            padding: 0;
            background-color: var(--light-green);
            color: var(--dark-green);
            line-height: 1.6; /* Increased line height for better readability */
        }
        .header {
            background-color: var(--dark-green);
            color: var(--white);
            padding: 20px 40px; /* Increased padding */
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .header h1 {
            margin: 0;
            font-size: 2em; /* Slightly larger title */
            font-weight: 600;
        }
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        /* Dashboard Grid Layout (Updated for Spacing and Professionalism) */
        .dashboard-container {
            display: grid;
            grid-template-columns: 1fr 3fr 1.5fr; /* Narrow Left, Wide Center, Medium Right */
            gap: 30px; /* Increased gap/spacing */
            padding: 30px; /* Increased padding */
            max-width: 1600px; /* Wider max width */
            margin: 0 auto;
        }
        .widget {
            background-color: var(--white);
            padding: 30px; /* Increased padding */
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            transition: all 0.3s ease;
        }
        .widget:hover {
            transform: translateY(-5px); /* More noticeable lift on hover */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        .widget h3 {
            color: var(--dark-green);
            margin-top: 0;
            border-bottom: 2px solid var(--light-green);
            padding-bottom: 12px;
            font-size: 1.5em;
            font-weight: 600;
        }

        /* --- 1. Competition Widget (Banner) --- */
        .competition-widget {
            grid-column: 1 / 4;
            background-color: var(--accent-green);
            padding: 40px; /* Larger banner padding */
            font-size: 1.1em;
            border-left: 8px solid var(--mid-green);
        }
        .competition-widget h3 {
            font-size: 2em;
            color: var(--dark-green);
            border: none;
            padding-bottom: 0;
        }
        .league-progress {
            display: flex;
            align-items: center;
            margin: 30px 0;
        }
        .trophy {
            font-size: 3.5em; /* Larger icons */
        }
        .progress-line {
            flex-grow: 1;
            height: 20px; /* Thicker bar */
            background: linear-gradient(to right, #D4AF37 0%, #D4AF37 36%, var(--gray-light) 36%, var(--gray-light) 100%);
            border-radius: 10px;
            margin: 0 25px;
            position: relative;
        }
        .progress-line::after {
            content: '3,600 / 10,000 Pts'; /* Added comma for professionalism */
            top: -35px;
            left: 36%;
            transform: translateX(-50%);
            font-size: 1.1em;
            font-weight: bold;
            color: var(--dark-green);
            white-space: nowrap;
        }
        .individual-scores {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--light-green);
        }
        .individual-scores h4 {
            font-size: 1.2em;
            color: var(--dark-green);
        }
        .score-list li {
            padding: 10px 0; /* More vertical space */
            border-bottom: 1px solid var(--gray-light);
            font-size: 1.05em;
        }
        .score-list li strong {
            color: var(--point-green);
            font-size: 1.1em;
        }

        /* --- 2. Recent Activity Widget --- */
        .recent-activity-widget {
            grid-column: 1 / 2;
            padding: 20px; /* Adjust slightly for cleaner list */
        }
        .activity-item {
            padding: 15px; /* More padding */
            margin-bottom: 15px; /* More vertical space */
            border-left: 6px solid var(--mid-green);
        }
        .activity-details p {
            font-size: 1em;
            font-weight: 600;
        }
        .activity-details span {
            font-size: 0.85em;
            color: #888;
        }
        .activity-points {
            font-size: 1.2em;
            color: var(--point-green);
        }

        /* --- 3. Achievements Widget (Center) --- */
        .achievements-widget {
            grid-column: 2 / 3;
        }
        .achievement-grid {
            gap: 20px; /* Increased gap */
        }
        .achievement-card {
            padding: 20px; /* More padding */
            background-color: var(--gray-light);
            border: 1px solid var(--light-green);
            transition: background-color 0.3s;
        }
        .achievement-card:hover {
            background-color: var(--activity-green);
        }
        .achievement-icon {
            font-size: 3em;
        }
        .achievement-card strong {
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        .achievement-card p {
            margin: 3px 0;
            font-size: 0.9em;
            color: #666;
        }

        /* --- 4. Verify Deed Widget (Right) --- */
        .verify-deed-widget {
            grid-column: 3 / 4;
            padding-top: 20px; /* Aligns content better */
        }
        .deed-form p {
            margin-bottom: 20px;
            font-style: italic;
            color: #555;
        }
        .deed-form label {
            margin: 15px 0 8px; /* More space around labels */
            font-size: 1em;
        }
        .deed-form select, .deed-form button {
            padding: 12px; /* Taller form elements */
            border-radius: 8px;
        }
        .deed-form select {
            border: 1px solid #ddd;
            background-color: var(--white);
            appearance: none; /* Hide default dropdown arrow */
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23004d40%22%20d%3D%22M287%20170L146%20292%205%20170h282z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 12px top 50%;
            background-size: 0.65em auto;
        }
        .deed-form input[type="file"] {
            border: 1px solid #ddd;
            background-color: var(--white);
            padding: 10px;
            border-radius: 8px;
        }
        .deed-form button {
            margin-top: 15px;
            background-color: var(--mid-green);
            font-size: 1.1em;
        }
        
        /* --- 5. Rewards Widget (Full Width) --- */
        .rewards-widget {
            grid-column: 1 / 4;
            padding-bottom: 10px; /* Reduced bottom padding to hug the table */
        }
        .leaderboard-table {
            margin-top: 20px;
        }
        .leaderboard-table th {
            padding: 15px; /* More padding */
            font-size: 1em;
        }
        .leaderboard-table td {
            padding: 15px;
        }
        .leaderboard-table tr:hover {
            background-color: var(--activity-green); /* Highlight row on hover */
        }
        .leaderboard-table td:last-child {
            font-size: 1.1em;
        }

        /* --- 6. CO2 Reduction Widget (Full Width at Bottom) --- */
        .co2-reduction-widget {
            grid-column: 1 / 4;
            padding-bottom: 40px;
        }
        .co2-reduction-widget h3 {
            border-bottom: none;
            padding-bottom: 0;
        }
        .reduction-summary-grid {
            margin-top: 20px;
        }
        .metric-card {
            padding: 20px;
            border: 1px solid var(--light-green);
            border-radius: 10px;
            background-color: var(--gray-light);
        }
        .data-point {
            font-size: 1em !important;
            color: var(--dark-green);
        }

        /* Responsive adjustments */
        @media (max-width: 1000px) {
            .dashboard-container {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            .widget {
                grid-column: 1 / 2;
                padding: 20px;
            }
            .competition-widget {
                order: -3;
            }
            .achievements-widget {
                order: -2;
            }
            .recent-activity-widget {
                order: -1;
            }
            .reduction-summary-grid {
                grid-template-columns: 1fr !important;
            }
        }
        
        /* Modal Styles (Improved) */
        .modal-content {
            margin: 10% auto; /* Move higher up */
            padding: 40px;
            max-width: 350px;
        }
        .leaf-svg {
            width: 120px;
            height: 120px;
        }
        .modal-content.success #verification-message,
        .modal-content.success .leaf-svg,
        .modal-content.success #initial-message {
            display: none;
        }

        .modal-content.success .success-tick,
        .modal-content.success .points-allotted {
            display: block;
        }
        
        #initial-message {
            font-size: 1.1em;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>üå≥ Eco-League Dashboard</h1>
        <p>Welcome, The AlHashimi Family</p>
    </div>

    <div class="dashboard-container">

        <div class="widget competition-widget">
            <h3>League Standing: Gold Tier</h3>
            <p>You are currently in the Gold Tier. Achieve 10,000 points to reach the Diamond League!</p>
            
            <div class="league-progress">
                <span class="trophy">üèÜ</span>
                <div class="progress-line" id="progress-line"></div>
                <span class="trophy">üíé</span>
            </div>
            
            <div class="individual-scores">
                <h4>Individual Leaderboard</h4>
                <ul class="score-list">
                    <li>Father Saud 950 pts</li>
                    <li>Mother Khulood 900 pts</li>
                    <li>Daughter Khultoom 850 pts</li>
                    <li>Son Abdalla 900 pts</li>
                    <li style="font-weight: bold; border-top: 2px solid var(--mid-green); margin-top: 10px; padding-top: 10px;">Family Total 3,600 pts</li>
                </ul>
            </div>
        </div>

        <div class="widget recent-activity-widget">
            <h3>üìÖ Latest Activity</h3>
            
            <div class="activity-item">
                <div class="activity-details">
                    <p>Reduction Adventure challenge completed</p>
                    <span>Dec 5</span>
                </div>
                <span class="activity-points">+150 pts</span>
            </div>

            <div class="activity-item">
                <div class="activity-details">
                    <p>Bonus for consistent participation</p>
                    <span>Nov 30</span>
                </div>
                <span class="activity-points">+75 pts</span>
            </div>

            <div class="activity-item">
                <div class="activity-details">
                    <p>Advanced in points for participation</p>
                    <span>Nov 22</span>
                </div>
                <span class="activity-points">+150 pts</span>
            </div>
            
            <div class="activity-item">
                <div class="activity-details">
                    <p>'No-Plastic Week' challenge completed</p>
                    <span>Nov 17</span>
                </div>
                <span class="activity-points">+300 pts</span>
            </div>
        </div>

        <div class="widget achievements-widget">
            <h3>üåü Achievements Unlocked</h3>
            <hr style="border: 0; border-top: 1px solid var(--light-green); margin: 10px 0;">

            <div class="achievement-grid">
                <div class="achievement-card">
                    <span class="achievement-icon">üå¥</span>
                    <strong>Nature Leader</strong>
                    <p>Planted **10 trees** this month</p>
                    <p style="font-size: 0.9em; font-weight: bold; color: var(--point-green);">+100 points</p>
                </div>
                <div class="achievement-card">
                    <span class="achievement-icon">üõ¢Ô∏è</span>
                    <strong>Oil Recycler</strong>
                    <p>Reused **2L** of cooking oil</p>
                    <p style="font-size: 0.9em; font-weight: bold; color: var(--point-green);">+250 points</p>
                </div>
                <div class="achievement-card">
                    <span class="achievement-icon">üë®üèΩ‚Äçüë©üèª‚Äçüëßüèº‚Äçüßíüèº</span>
                    <strong>Teamwork Max</strong>
                    <p>All members completed a challenge</p>
                    <p style="font-size: 0.9em; font-weight: bold; color: var(--point-green);">+300 points</p>
                </div>
                <div class="achievement-card">
                    <span class="achievement-icon">üöá</span>
                    <strong>Green Commuter</strong>
                    <p>Reduced CO2 by **500kg** using RTA</p>
                    <p style="font-size: 0.9em; font-weight: bold; color: var(--point-green);">+500 points</p>
                </div>
            </div>
        </div>

        <div class="widget verify-deed-widget" id="deed-widget">
            <h3>‚úÖ Submit Green Action</h3> 
            
            <div class="deed-form" id="deed-form">
                <p>Log a completed action and upload photo proof for points verification.</p>
                
                <label for="deed-type">Green Action:</label>
                <select id="deed-type" name="deed-type">
                    <option value="" disabled selected>Choose an Action</option>
                    <option value="reused-water">üíß Reused water</option>
                    <option value="public-transport">üöå Used public transport</option>
                    <option value="reduced-electricity">üí° Reduced electricity</option>
                    <option value="recycled-item">‚ôªÔ∏è Recycled bulk material</option>
                    <option value="plastic-free">üõí Plastic-free shopping</option>
                    <option value="planted-tree">üå± Planted a tree</option>
                    <option value="composted">üóëÔ∏è Started compost pile</option>
                </select>

                <label for="deed-by">Action Performed By:</label>
                <select id="deed-by" name="deed-by">
                    <option value="" disabled selected>Choose a Family Member</option>
                    <option value="Father">Father Saud</option>
                    <option value="Mother">Mother Khulood</option>
                    <option value="Daughter">Daughter Khultoom</option>
                    <option value="Son">Son Abdalla</option>
                    <option value="Full family">Full family</option>
                </select>
                
                <label for="proof-upload">Upload Proof:</label>
                <input type="file" id="proof-upload" accept="image/*" style="width: 100%; margin-bottom: 20px;">
                

                <button id="submit-verification-btn">Submit Action</button>
                <p style="font-size: 0.8em; text-align: center; color: gray;">*Points awarded after AI Verification</p>
            </div>
        </div>

        <div class="widget rewards-widget">
            <h3>üèÜ Community Leaderboard</h3>
            <p>Compare your family's progress! Top families receive exclusive rewards from local eco-partners.</p>

            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Family Name</th>
                        <th>League</th>
                        <th>Total Points</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ü•á</td>
                        <td>The Jeons</td>
                        <td>Diamond</td>
                        <td>9,005</td>
                    </tr>
                    <tr>
                        <td>**ü•à**</td>
                        <td>**The Hashimis**</td>
                        <td>**Gold**</td>
                        <td>**3,600**</td>
                    </tr>
                    <tr>
                        <td>ü•â</td>
                        <td>The Riveras</td>
                        <td>Silver</td>
                        <td>2,100</td>
                    </tr>
                    <tr>
                        <td>üèÖ</td>
                        <td>The Sharmas</td>
                        <td>Bronze</td>
                        <td>1,355</td>
                    </tr>
                </tbody>
            </table>
            <p style="text-align: right; margin-top: 15px;"><a href="#" style="color: var(--dark-green); font-weight: 600;">View Partner Rewards &rarr;</a></p>
        </div>


    <div class="widget co2-reduction-widget">
        <h3>üåç Environmental Impact Tracker (YTD)</h3>
        
        <div class="reduction-summary-grid">

            <div class="metric-card water-card">
                <h4 class="graph-title" style="color: #004d40; margin-top: 0; margin-bottom: 15px; font-size: 1.1em;">üíß Water Savings</h4>
                
                <div class="doughnut-chart" style="
                    --size: 150px;
                    --border-width: 15px;
                    width: var(--size);
                    height: var(--size);
                    margin: 0 auto 10px;
                    border-radius: 50%;
                    position: relative;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    background: conic-gradient(#2196F3 0% 98.38%, #e3f2fd 98.38% 100%); 
                ">
                    <div style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 120px;
                        height: 120px;
                        background-color: #ffffff;
                        border-radius: 50%;
                    "></div>
                    
                    <span class="value" style="position: relative; font-size: 1.8em; font-weight: bold; color: #004d40;">98.38%</span>
                    <span class="label" style="position: relative; font-size: 0.8em; color: #666; margin-top: 5px;">Target Reached</span>
                </div>
                <p class="data-point" style="margin-top: 15px; text-align: center;">**303,000 Litres** Saved</p>
            </div>

            <div class="metric-card energy-card">
                <h4 class="graph-title" style="color: #004d40; margin-top: 0; margin-bottom: 15px; font-size: 1.1em;">‚ö° Energy Savings (kWh)</h4>
                
                <div class="bar-chart-container" style="
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-end;
                    height: 150px;
                    padding: 0 5px;
                    border-bottom: 2px solid #004d40;
                    background-color: #ffffff;
                    border-radius: 5px;
                ">
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 35%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Jan</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 20%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Feb</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 20%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Mar</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 65%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Apr</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 28%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">May</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 20%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Jun</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 40%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Jul</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 30%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Aug</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 45%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Sep</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 50%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Oct</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 50%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Nov</span>
                    </div>
                    <div class="bar-group" style="display: flex; flex-direction: column; align-items: center; justify-content: flex-end; height: 100%; flex-grow: 1; margin: 0 2px;">
                        <div class="bar" style="width: 80%; background-color: #ff9800; height: 25%;"></div><span class="bar-label" style="font-size: 0.7em; color: #666; margin-top: 5px;">Dec</span>
                    </div>
                </div>
                <p class="data-point" style="margin-top: 15px; text-align: center;">**18,904 kWh** Saved</p>
            </div>

            <div class="metric-card tree-card">
                <h4 class="graph-title" style="color: #004d40; margin-top: 0; margin-bottom: 15px; font-size: 1.1em;">üå¥ Trees Planted (Total 25)</h4>
                
                <div class="pictograph-container" style="text-align: left; padding: 10px; background-color: #ffffff; border-radius: 5px;">
                    <div class="tree-month" style="display: flex; justify-content: space-between; align-items: center; padding: 5px 0; border-bottom: 1px dotted #e8f5e9;">
                        <span class="month-label" style="font-weight: bold; font-size: 0.9em; color: #004d40; flex-basis: 30%;">Q1 (Jan-Mar):</span>
                        <span class="tree-icons" style="flex-basis: 70%; font-size: 1.5em; white-space: normal; line-height: 1.2;">üå≥üå≥üå≥üå≥üå≥</span> </div>
                    <div class="tree-month" style="display: flex; justify-content: space-between; align-items: center; padding: 5px 0; border-bottom: 1px dotted #e8f5e9;">
                        <span class="month-label" style="font-weight: bold; font-size: 0.9em; color: #004d40; flex-basis: 30%;">Q2 (Apr-Jun):</span>
                        <span class="tree-icons" style="flex-basis: 70%; font-size: 1.5em; white-space: normal; line-height: 1.2;">üå≥üå≥üå≥üå≥üå≥üå≥üå≥</span> </div>
                    <div class="tree-month" style="display: flex; justify-content: space-between; align-items: center; padding: 5px 0; border-bottom: 1px dotted #e8f5e9;">
                        <span class="month-label" style="font-weight: bold; font-size: 0.9em; color: #004d40; flex-basis: 30%;">Q3 (Jul-Sep):</span>
                        <span class="tree-icons" style="flex-basis: 70%; font-size: 1.5em; white-space: normal; line-height: 1.2;">üå≥üå≥üå≥</span> </div>
                    <div class="tree-month" style="display: flex; justify-content: space-between; align-items: center; padding: 5px 0;">
                        <span class="month-label" style="font-weight: bold; font-size: 0.9em; color: #004d40; flex-basis: 30%;">Q4 (Oct-Dec):</span>
                        <span class="tree-icons" style="flex-basis: 70%; font-size: 1.5em; white-space: normal; line-height: 1.2;">üå≥üå≥üå≥üå≥üå≥üå≥üå≥üå≥üå≥üå≥</span> </div>
                </div>
                <p class="data-point" style="margin-top: 15px; text-align: center;">Total **25 Trees** Planted (250 kg CO‚ÇÇ absorbed)</p>
            </div>
        </div>
    </div>
</div>

    <div id="verification-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-modal">&times;</span>
            
            <h3 id="initial-message" style="color: var(--dark-green);">Submitting Deed for Review...</h3>

            <svg class="leaf-svg" viewBox="0 0 100 100" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path id="leaf-path" d="M 50 10 L 70 30 L 60 40 L 80 60 L 50 90 L 20 60 L 40 40 L 30 30 Z" />
            </svg>
            <p id="verification-message" style="color: #666;">Our AI is verifying the submission. This usually takes a moment.</p>
            
            <span class="success-tick" style="display: none;">‚úîÔ∏è</span>
            <p class="points-allotted" style="display: none;">**+200 Points** Awarded!</p>
            <p id="success-message" style="display: none;">Your action has been verified and points are added to your score!</p>

        </div>
    </div>

    <script>
        // Modal / Pop-up Logic
        var modal = document.getElementById("verification-modal");
        var btn = document.getElementById("submit-verification-btn");
        var span = document.getElementById("close-modal");

        btn.onclick = function(event) {
            event.preventDefault(); // Prevent form submission if it were a real form
            
            // Basic validation check (ensure a deed is selected)
            const deedType = document.getElementById('deed-type').value;
            const deedBy = document.getElementById('deed-by').value;
            if (!deedType || !deedBy) {
                alert("Please select a Green Action and the family member who performed it.");
                return;
            }
            
            // Reset modal state
            modal.querySelector('.modal-content').classList.remove('success');
            document.getElementById('success-message').style.display = 'none';
            document.getElementById('initial-message').style.display = 'block';
            document.getElementById('verification-message').style.display = 'block';
            
            // Show the modal
            modal.style.display = "block";
            
            // Reset and start animation
            const leafPath = document.getElementById('leaf-path');
            leafPath.style.animation = 'none';
            leafPath.offsetHeight; // Trigger reflow
            leafPath.style.animation = 'paint-leaf 3s linear forwards';

            // Simulate the verification process (e.g., 4 seconds)
            setTimeout(function() {
                // Change modal content to success state
                modal.querySelector('.modal-content').classList.add('success');
                document.getElementById('success-message').style.display = 'block';

                // In a real app, update scores here. For the demo, update the displayed total.
                // Note: The original progress bar logic uses inline CSS which makes live updates difficult 
                // without calculating new percentages, so we only update the list text.
                document.getElementById('family-total-score').innerHTML = '<strong>3,800 pts</strong>'; 
            }, 4000); // 4-second delay
        }

        span.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
